{% extends "base.html" %}
{% block content %}
<div class="container my-4" style="max-width: 1100px;">

  <!-- Toolbar -->
  <div class="card bg-dark border-secondary mb-3" id="logs-toolbar">
    <div class="card-body">
      <form id="controls" class="row row-cols-1 row-cols-sm-auto g-2 align-items-center">
        <div class="col">
          <label class="col-form-label text-light control-label" for="level">Niveau</label>
          <select id="level" class="form-select">
            <option>DEBUG</option>
            <option selected>INFO</option>
            <option>WARNING</option>
            <option>ERROR</option>
            <option>CRITICAL</option>
          </select>
        </div>

        <div class="col">
          <label class="col-form-label text-light control-label" for="q">Filtre (regex)</label>
          <input id="q" type="text" class="form-control" placeholder="ex: (nozzle|MQTT|ERROR)">
        </div>

        <div class="col d-flex gap-2 align-items-end">
          <button type="button" id="apply" class="btn btn-primary">
            <i class="bi bi-funnel"></i> Appliquer
          </button>
          <button type="button" id="pause" class="btn btn-outline-warning">
            ‚è∏Ô∏è Pause
          </button>
          <button type="button" id="clear" class="btn btn-outline-danger">
            üßπ Clear
          </button>
          <div class="form-check ms-2">
            <input class="form-check-input" type="checkbox" id="autoscroll" checked>
            <label class="form-check-label text-light" for="autoscroll">Auto‚Äëscroll</label>
          </div>
        </div>

        <div class="col ms-auto text-secondary small">
          <span id="stats">‚Äî</span>
        </div>
      </form>
    </div>
  </div>

  <!-- Zone logs -->
  <div class="card bg-black border-secondary">
    <div id="logs" class="card-body font-monospace"
         style="white-space: pre-wrap; line-height: 1.2; min-height: 50vh; max-height: 70vh; overflow: auto;">

      <!-- lignes ins√©r√©es ici -->

    </div>
  </div>
</div>

<style>
  /* Couleurs par niveau */
  .log-line       { margin: 2px 0; opacity: 0; animation: fadeIn 200ms ease-out forwards; }
  .lvl-DEBUG      { color: #00bcd4; }
  .lvl-INFO       { color: #8bc34a; }
  .lvl-WARNING    { color: #ffc107; }
  .lvl-ERROR      { color: #ff5252; font-weight: 600; }
  .lvl-CRITICAL   { color: #ff1744; font-weight: 700; text-decoration: underline; }

  .ts             { color: #9e9e9e; margin-right: .5rem; }
  .logger.badge   { background: #2b2b2b; border: 1px solid #444; color: #cfcfcf; }

  /* S√©parateur de date (changement de jour) */
  .day-sep { color:#bdbdbd; border-top:1px dashed #555; margin:.5rem 0 .5rem; padding-top:.3rem; font-size:.9rem; }

  /* Highlight court pour nouvelles lignes */
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  .flash { animation: flashBg 1200ms ease-out 1; }
  @keyframes flashBg {
    0%   { background: rgba(255,255,255,.06); }
    100% { background: transparent; }
  }

  .control-label { font-size: .9rem; }
</style>
